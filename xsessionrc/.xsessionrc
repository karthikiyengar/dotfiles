#!bin/bash
if [[ "$DESKTOP_SESSION" == *"xmonad"* ]] 
then
  source ~/.profile
  # enable compositing
  # compton --backend glx --xrender-sync --xrender-sync-fence -fCz --fade-delta 4 &!
  compton --fade-delta 3 -CfGb
  
  lxqt-policykit-agent &!
  gnome-keyring-daemon &!
  # Applets
  nm-applet &!
  pasystray &!
  blueman-applet &!
  greenclip daemon &!
  rumno-background &!
  flameshot &!
  redshift-gtk &!
  protonvpn-tray &!

  # Volume and brightness notifications
  ~/.wm-scripts/brightness-watcher.py | xob &!
  ~/.wm-scripts/pulse-volume-watcher.py | xob &!

  # Set cursor to pointer
  xsetroot -cursor_name left_ptr &!
  
  # Load custom fonts
  xset +fp $HOME/.fonts
  xset fp rehash &!

  # Notification Daemon
  dunst &!

  # Set the correct xrandr settings
  autorandr -c

  # Enable keyboard layouts
  setxkbmap -layout us,de -option 'grp:alt_shift_space_toggle'
  recollindex -w 60 -m &!


  # Set Wallpaper
  if [ -f ~/.wallpapers/current-wallpaper.jpg ]; then
    feh --bg-scale ~/.wallpapers/current-wallpaper.jpg
  else
    feh --bg-scale ~/.wallpapers/dark-space.jpg
  fi
 
  if [ -x "$(command -v nextcloud)" ]; then
    nextcloud --background &!
  fi

  # Set touchpad settings
  ~/.wm-scripts/touchpad-settings.sh  
 
  export _JAVA_AWT_WM_NONREPARENTING=1
  # Run xidlehook
  ~/.wm-scripts/suspend.sh
fi
